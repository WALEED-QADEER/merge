<h1>New Task </h1>

<%= render "form", task: @task %>
<script>
  
$(document).ready(function () {
    $('#search_project').on('input', function () {
      var search_term = $(this).val();
  
      $.ajax({
        url: '/tasks/search_projects',
        type: 'GET',
        dataType: 'json',
        data: { search_term: search_term },
        success: function (data) {
        
          var dropdown = $('#project_dropdown');
  
          
          dropdown.empty();
  
         
          data.forEach(function (project) {
            dropdown.append(
              $('<option>').val(project.id).text(project.name) 
            );
          });
        },
        error: function (xhr, status, error) {
          console.log("its not working")
        }
      });
    });
  });
  
  </script>
